<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>lookup.safariextz setting window</title>
<style>
table th td {
  border: 1px #444 solid;
  margin: 0px;
  padding: 0px;
}
</style>
<script type="text/javascript">
const NUMMAXITEMS = 10;
function init() {
  var pattern = JSON.parse(localStorage.pattern);
  for (var i = 0; i < pattern.length; i++) {
    document.getElementById("title" + i).value = pattern[i].title;
    document.getElementById("url" + i).value = pattern[i].url;
    document.getElementById("command" + i).value = pattern[i].command;
  }
}
function save() {
  var pattern = [];
  for (var i = 0; i < NUMMAXITEMS; i++) {
    if (document.getElementById("title" + i).value != ""
      && document.getElementById("url" + i).value != ""
      && document.getElementById("command" + i).value != "") {
      pattern.push({
        title: document.getElementById("title" + i).value,
        url: document.getElementById("url" + i).value,
        command: document.getElementById("command" + i).value
      });
    }
  }
  safari.self.tab.dispatchMessage("saveOption", {key: "pattern", value: JSON.stringify(pattern)});
}
</script>
</head>
<body onload="init()">
  <table>
    <tr><th></th><th>title</th><th>url</th><th>command</th></tr>
    <tr>
      <td>1</td>
      <td><input id="title0" type="text"></td>
      <td><input id="url0" type="text" size="100"></td>
      <td><input id="command0" type="text"></td>
    </tr>
    <tr>
      <td>2</td>
      <td><input id="title1" type="text"></td>
      <td><input id="url1" type="text" size="100"></td>
      <td><input id="command1" type="text"></td>
    </tr>
    <tr>
      <td>3</td>
      <td><input id="title2" type="text"></td>
      <td><input id="url2" type="text" size="100"></td>
      <td><input id="command2" type="text"></td>
    </tr>
    <tr>
      <td>4</td>
      <td><input id="title3" type="text"></td>
      <td><input id="url3" type="text" size="100"></td>
      <td><input id="command3" type="text"></td>
    </tr>
    <tr>
      <td>5</td>
      <td><input id="title4" type="text"></td>
      <td><input id="url4" type="text" size="100"></td>
      <td><input id="command4" type="text"></td>
    </tr>
    <tr>
      <td>6</td>
      <td><input id="title5" type="text"></td>
      <td><input id="url5" type="text" size="100"></td>
      <td><input id="command5" type="text"></td>
    </tr>
    <tr>
      <td>7</td>
      <td><input id="title6" type="text"></td>
      <td><input id="url6" type="text" size="100"></td>
      <td><input id="command6" type="text"></td>
    </tr>
    <tr align="left">
      <td>8</td>
      <td><input id="title7" type="text"></td>
      <td><input id="url7" type="text" size="100"></td>
      <td><input id="command7" type="text"></td>
    </tr>
    <tr>
      <td>9</td>
      <td><input id="title8" type="text"></td>
      <td><input id="url8" type="text" size="100"></td>
      <td><input id="command8" type="text"></td>
    </tr>
    <tr>
      <td>10</td>
      <td><input id="title9" type="text"></td>
      <td><input id="url9" type="text" size="100"></td>
      <td><input id="command9" type="text"></td>
    </tr>
  </table>
  <hr>
  <input type="button" onclick="save()" value="apply">
</body>
</html>